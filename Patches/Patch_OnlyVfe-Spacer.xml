<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Vanilla Furniture Expanded - Spacer Module</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <!--Patch for Players-->
      <li Class="PatchOperationAdd">
        <xpath>/Defs/RoyalTitleDef[defName="Esquire" or defName="Knight" or defName="Praetor"]/bedroomRequirements/li[@Class="RoomRequirement_ThingAnyOf"]/things</xpath>
        <value>
          <li>Bed_AdvDoubleBed</li>
        </value>
      </li>
      <li Class="PatchOperationRemove">
        <xpath>/Defs/RoyalTitleDef[defName="Knight" or defName="Praetor" or defName="Baron" or defName="Count"]/bedroomRequirements/li[@Class="RoomRequirement_Thing"]</xpath>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/RoyalTitleDef[defName="Knight" or defName="Praetor" or defName="Baron" or defName="Count"]/bedroomRequirements</xpath>
        <value>
          <li Class="RoomRequirement_ThingAnyOf">
            <things>
              <li>EndTable</li>
              <li>Table_IlluminatedEndTable</li>
            </things>
          </li>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/RoyalTitleDef[defName="Knight" or defName="Praetor" or defName="Baron" or defName="Count"]/bedroomRequirements</xpath>
        <value>
          <li Class="RoomRequirement_ThingAnyOf">
            <things>
              <li>Dresser</li>
              <li>Table_IlluminatedDresser</li>
            </things>
          </li>
        </value>
      </li>
      <!--Patch NPC-->
      <li Class="PatchOperationAdd">
        <xpath>/Defs/RoyalTitleDef[@Name="BaseEmpireTitleNPC"]/bedroomRequirements/li[@Class="RoomRequirement_ThingAnyOf"]/things</xpath>
        <value>
          <li>Bed_AdvDoubleBed</li>
        </value>
      </li>
      <li Class="PatchOperationRemove">
        <xpath>/Defs/RoyalTitleDef[@Name="BaseEmpireTitleNPC"]/bedroomRequirements/li[@Class="RoomRequirement_Thing"]</xpath>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/RoyalTitleDef[@Name="BaseEmpireTitleNPC"]/bedroomRequirements</xpath>
        <value>
          <li Class="RoomRequirement_ThingAnyOf">
            <things>
              <li>EndTable</li>
              <li>Table_IlluminatedEndTable</li>
            </things>
          </li>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/RoyalTitleDef[@Name="BaseEmpireTitleNPC"]/bedroomRequirements</xpath>
        <value>
          <li Class="RoomRequirement_ThingAnyOf">
            <things>
              <li>Dresser</li>
              <li>Table_IlluminatedDresser</li>
            </things>
          </li>
        </value>
      </li>
    </match>
  </Operation>
</Patch>